<!doctype html>
<head>
    <meta charset="utf-8">
    <title>Keypress: A Javascript library for capturing input</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/solarized_dark.css">
    <script src="./js/keypress.js"></script>
</head>
<body>
    <header>
        <div class="fixed_width_wrapper">
            <hgroup>
                <h1>Keypress</h1>
                <h2>A robust Javascript library for capturing keyboard input</h2>
            </hgroup>
            <a href="http://twitter.com/dmaurolizer">
                <div class="dmauro">
                    <p>
                        Â© David Mauro 2012
                    </p>
                </div>
            </a>
        </div>
    </header>
    <div class="fixed_width_wrapper">
        <div class="keyboard">
            <section>
                <div class="row">
                    <div id="key_accent" class="key"><em>~</em><br><strong>`</strong></div>
                    <div id="key_one" class="key"><em>!</em><br><strong>1</strong></div>
                    <div id="key_two" class="key"><em>@</em><br><strong>2</strong></div>
                    <div id="key_three" class="key"><em>#</em><br><strong>3</strong></div>
                    <div id="key_four" class="key"><em>$</em><br><strong>4</strong></div>
                    <div id="key_five" class="key"><em>%</em><br><strong>5</strong></div>
                    <div id="key_six" class="key"><em>^</em><br><strong>6</strong></div>
                    <div id="key_seven" class="key"><em>&</em><br><strong>7</strong></div>
                    <div id="key_eight" class="key"><em>*</em><br><strong>8</strong></div>
                    <div id="key_nine" class="key"><em>(</em><br><strong>9</strong></div>
                    <div id="key_zero" class="key"><em>)</em><br><strong>0</strong></div>
                    <div id="key_hyphen" class="key"><em>_</em><br><strong>-</strong></div>
                    <div id="key_equals" class="key"><em>+</em><br><strong>=</strong></div>
                    <div id="key_backspace" class="key wide_2"><span class="right"><strong>backspace</strong></span></div>
                </div>
                <div class="row">
                    <div id="key_tab" class="key wide_2"><span class="left"><strong>tab</strong></span></div>
                    <div id="key_q" class="key single"><strong>Q</strong></div>
                    <div id="key_w" class="key single"><strong>W</strong></div>
                    <div id="key_e" class="key single"><strong>E</strong></div>
                    <div id="key_r" class="key single"><strong>R</strong></div>
                    <div id="key_t" class="key single"><strong>T</strong></div>
                    <div id="key_y" class="key single"><strong>Y</strong></div>
                    <div id="key_u" class="key single"><strong>U</strong></div>
                    <div id="key_i" class="key single"><strong>I</strong></div>
                    <div id="key_o" class="key single"><strong>O</strong></div>
                    <div id="key_p" class="key single"><strong>P</strong></div>
                    <div id="key_left_bracket" class="key"><em>{</em><br><strong>[</strong></div>
                    <div id="key_right_bracket" class="key"><em>}</em><br><strong>]</strong></div>
                    <div id="key_backslash" class="key"><em>|</em><br><strong>\</strong></div>
                </div>
                <div class="row">
                    <div id="key_caps_lock" class="key wide_3"><span class="left"><strong>caps lock</strong></span></div>
                    <div id="key_a" class="key single"><strong>A</strong></div>
                    <div id="key_s" class="key single"><strong>S</strong></div>
                    <div id="key_d" class="key single"><strong>D</strong></div>
                    <div id="key_f" class="key single"><strong>F</strong></div>
                    <div id="key_g" class="key single"><strong>G</strong></div>
                    <div id="key_h" class="key single"><strong>H</strong></div>
                    <div id="key_j" class="key single"><strong>J</strong></div>
                    <div id="key_k" class="key single"><strong>K</strong></div>
                    <div id="key_l" class="key single"><strong>L</strong></div>
                    <div id="key_semicolon" class="key"><em>:</em><br><strong>;</strong></div>
                    <div id="key_apostrophe" class="key"><em>"</em><br><strong>'</strong></div>
                    <div id="key_enter" class="key wide_3"><span class="right"><strong>enter</strong></span></div>
                </div>
                <div class="row">
                    <div id="key_left_shift" class="key wide_4"><span class="left"><strong>shift</strong></span></div>
                    <div id="key_z" class="key single"><strong>Z</strong></div>
                    <div id="key_x" class="key single"><strong>X</strong></div>
                    <div id="key_c" class="key single"><strong>C</strong></div>
                    <div id="key_v" class="key single"><strong>V</strong></div>
                    <div id="key_b" class="key single"><strong>B</strong></div>
                    <div id="key_n" class="key single"><strong>N</strong></div>
                    <div id="key_m" class="key single"><strong>M</strong></div>
                    <div id="key_comma" class="key"><em>&lt;</em><br><strong>,</strong></div>
                    <div id="key_period" class="key"><em>&gt;</em><br><strong>.</strong></div>
                    <div id="key_forwardslash" class="key"><em>?</em><br><strong>/</strong></div>
                    <div id="key_right_shift" class="key wide_4"><span class="right"><strong>shift</strong></span></div>
                </div>
                <div class="row">
                    <div id="key_left_ctrl" class="key wide_1"><span class="left"><strong>ctrl</strong></span></div>
                    <div id="key_left_alt" class="key wide_1"><span class="left"><strong>alt</strong></span></div>
                    <div id="key_left_cmd" class="key wide_1"><span class="left"><strong>cmd</strong></span></div>
                    <div id="key_space" class="key wide_5"></div>
                    <div id="key_right_cmd" class="key wide_1"><span class="right"><strong>cmd</strong></span></div>
                    <div id="key_right_alt" class="key wide_1"><span class="right"><strong>alt</strong></span></div>
                    <div id="key_right_ctrl" class="key wide_1"><span class="right"><strong>ctrl</strong></span></div>
                </div>
                <p class="message">
                    &nbsp;
                </p>
            </section>
            <section>
                <div class="row">
                    <div id="key_print" class="key"><span><strong>print</strong></span></div>
                    <div id="key_scroll_lock" class="key"><span><strong>scroll lock</strong></span></div>
                    <div id="key_pause_break" class="key"><span><strong>pause break</strong></span></div>
                </div>
                <div class="row">
                    <div id="key_insert" class="key"><span><strong>insert</strong></span></div>
                    <div id="key_home" class="key"><span><strong>home</strong></span></div>
                    <div id="key_page_up" class="key"><span><strong>page up</strong></span></div>
                </div>
                <div class="row">
                    <div id="key_delete" class="key"><span><strong>delete</strong></span></div>
                    <div id="key_end" class="key"><span><strong>end</strong></span></div>
                    <div id="key_page_down" class="key"><span><strong>page down</strong></span></div>
                </div>
                <div class="row">
                    <div class="key_filler"></div>
                    <div id="key_up" class="key"><div class="triangle up"></div></div>
                    <div class="key_filler"></div>
                </div>
                <div class="row">
                    <div id="key_left" class="key"><div class="triangle left"></div></div>
                    <div id="key_down"z class="key"><div class="triangle down"></div></div>
                    <div id="key_right" class="key"><div class="triangle right"></div></div>
                </div>
            </section>
            <section>
                <div class="row">
                    <div id="key_num_lock" class="key"><span><strong>num lock</strong></span></div>
                    <div id="key_divide" class="key single"><strong>/</strong></div>
                    <div id="key_multiply" class="key single"><strong>*</strong></div>
                    <div id="key_subtract" class="key single"><strong>-</strong></div>
                </div>
                <div class="row">
                    <div id="key_num_7" class="key"><strong>7</strong><span>home</span></div>
                    <div id="key_num_8" class="key"><strong>8</strong><br><div class="triangle up"></div></div>
                    <div id="key_num_9" class="key"><strong>9</strong><span>pgup</span></div>
                    <div id="key_add" class="key tall"><strong>+</strong></div>
                </div>
                <div class="row">
                    <div id="key_num_4" class="key"><strong>4</strong><br><div class="triangle left"></div></div>
                    <div id="key_num_5" class="key"><strong>5</strong></div>
                    <div id="key_num_6" class="key"><strong>6</strong><br><div class="triangle right"></div></div>
                </div>
                <div class="row">
                    <div id="key_num_1" class="key"><strong>1</strong><span>end</span></div>
                    <div id="key_num_2" class="key"><strong>2</strong><br><div class="triangle down"></div></div>
                    <div id="key_num_3" class="key"><strong>3</strong><span>pgdn</span></div>
                    <div id="key_num_enter" class="key tall"><span><strong>enter</strong></span></div>
                </div>
                <div class="row">
                    <div id="key_num_0" class="key wide_6"><strong>0</strong><span class="right">insert</span></div>
                    <div id="key_num_decimal" class="key"><strong>.</strong><br>del</div>
                </div>
                <p class="note">
                    Some browsers do not distinguish some or all of the numpad keys.
                </p>
            </section>
        </div>
        <div class="clearfix">
            <div class="overview">
                <h1 class="pink">Why use Keypress?</h1>
                <p>
                    Keypress is an input capture library with some very special features,
                    it is easy to pick up and use, has a reasonable footprint (~9kb),
                    and has no dependencies.
                    <br><br>
                    Here's some of what Keypress offers:
                </p>
                <ul>
                    <li><a class="demo_link" data-demo="demo_1">Fire on keyup and/or keydown</a></li>
                    <li><a class="demo_link" data-demo="demo_2">Any key can serve as a modifier</a></li>
                    <li><a class="demo_link" data-demo="demo_3">Special "counting" combos</a></li>
                    <li><a class="demo_link" data-demo="demo_4">Sequence combos</a></li>
                    <li><a class="demo_link" data-demo="demo_5">Other features...</a></li>
                </ul>

                <h1 class="lime">Why NOT use Keypress?</h1>
                <p>
                    I have tried to make this very easy to use even for simple
                    keyboard shortcuts, but if you don't need the more advanced
                    features, you might be better of with some of the
                    simpler solutions out there. The API is subject to change as
                    I get feedback, so if you're after stability, this might not be
                    for you just yet.
                </p>
            </div>

            <div class="get_keypress">
                <h1 class="blue">Download Keypress</h1>
                <div class="github_wrapper">
                    <img src="img/github_logo.png" width="77" height="34">
                    <a href="https://github.com/dmauro/Keypress/zipball/master">
                        <button class="github_style">Download as zip</button>
                    </a>
                    <a href="https://github.com/dmauro/Keypress/tarball/master">
                        <button class="github_style">Download as tar.gz</button>
                    </a>
                    <a href="https://github.com/dmauro/Keypress/">
                        <button class="github_style">Fork on Github</button>
                    </a>
                </div>
            </div>

            <div class="examples">
                <div class="example_window">
                    <div class="demo" data-demo="demo_1">
                        <h2>Bind to either or both keydown and keyup</h2>
                        <p>
                            While most of the time you'll want to bind to the keydown event to improve
                            the perceived responsiveness, there are times when you'll need to bind to 
                            keyup in addition to keydown, or even exclusively.
                        </p>
                        <p>
                            The keyboard demo above demonstrates binding to both by depressing the key when keydown
                            is triggered, and then releasing it when keyup is triggered. For some key
                            combos or outlier keys (eg. pressing a non-modifier key while the command key
                            is depressed) no keyup event is fired, in which case we manually trigger the
                            keyup callback immediately after keydown.
                        </p>
                        <p>
                            Any keys you press on your keyboard should reflect on the keyboard above. Be default
                            we are not preventing the default action for the events, so standard browser key
                            shortcuts will still fire normally.
                        </p>
                    </div>
                    <div class="demo" data-demo="demo_2">
                        <h2>Arbitrary Modifiers</h2>
                        <p>
                            Move around the grid in 8 directions using the wasd keys.
                        </p>
                        <div id="movement_grid">
                        </div>
                        <p>
                            With Keypress you can specify combos that include multiple non-modifer keys.
                            In this demo we're using combinations of the wasd keys to create combos
                            that allow us to move in diagonals without simply firing both components
                            of the diagonal direction individually.
                        </p>
                        <p>
                            This allows for a very intuitive wasd tile-based movement system that allows
                            for things like holding down one key of a component vector and tapping
                            the other to repeatedly trigger the diagonal movement, rather than
                            having to repeatedly press them both.
                        </p>
                    </div>
                    <div class="demo" data-demo="demo_3">
                        <h2>Counting combos</h2>
                        <p>
                            You can navigate these tabs by holding the tab button down and pressing the
                            spacebar repeatedly to cycle through them.
                        </p>
                        <ul id="counting_list">
                            <li class="active">
                                <h3>Home</h3>
                                <div>
                                    <p>
                                        The first tab is very easy to get to by simply pressing the tab key
                                        once on it's own. This is great for something users will need to get
                                        back to often and quickly.
                                    </p>
                                </div>
                            </li>
                            <li>
                                <h3>Portfolio</h3>
                                <div>
                                    <p>
                                        You would probably want to arrange these by order of importance and
                                        how often you expect the user to get to them. This requires only
                                        pressing tab and space once.
                                    </p>
                                </div>
                            </li>
                            <li>
                                <h3>About</h3>
                                <div>
                                    <p>
                                        Here, have some lorem ipsum:
                                        <br>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit,
                                        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                    </p>
                                </div>
                            </li>
                            <li>
                                <h3>Contact</h3>
                                <div>
                                    <p>
                                        Nothing to see here folks. You don't even get lipsum.
                                    </p>
                                </div>
                            </li>
                            <li>
                                <h3>Another Option</h3>
                                <div>
                                    <p>
                                        Yes, manila file folder, very tacky and silly, but you get it. I'm
                                        only trying to make a very obvious point about how you could use
                                        this feature.
                                    </p>
                                </div>
                            </li>
                            <li>
                                <h3>Last One</h3>
                                <div>
                                    <p>
                                        If the user continues to press space while holding tab, we'll wrap
                                        around to the start (we do that in our callback using modulo on the count
                                        integer that keypress passes to the callback as the second argument).
                                    </p>
                                </div>
                            </li>
                        </ul>
                        <p>
                            Counting combos are a unique feature that was created for fast and predictable
                            navigation. For this demo, the tab key is used for menu navigation. Pressing it
                            once will always take us back to the default menu position, but we can press
                            the spacebar while holding down the tab key to jump through the options. The
                            same number of keypresses will always take you to the same option no matter which
                            one is currently activated.
                        </p>
                        <p>
                            As long as we're holding down the tab key, on each press of the spacebar, we'll
                            call the keyDown callback with an additional count argument which is an integer
                            letting us know how many times space has been pressed. This count is reset each
                            time the last key of the combo, "tab", has been released.
                        </p>
                    </div>
                    <div class="demo" data-demo="demo_4">
                        <h2>Sequence Combos</h2>
                        <p>
                            Sequence combos are great if you want to hide an easter egg or some kind of
                            cheat code. You can have multiple sequence combos without worrying about
                            collisions (if one combo contained another for instance, they would both fire).
                        </p>
                        <p id="sequence_combo">
                            Write the word
                            '<strong><span class="keypress"><span class="key">key</span>press</span></strong>'
                            and the word '<strong><span class="javascript">JavaScript</span></strong>'
                            (including proper capitalization) to see these in action. We've created sequence
                            combos for the sequences "key", "keypress" and "JavaScript".
                        </p>
                        <p>
                            You can probably find other fun uses for sequence combos such as entering combos
                            in a fighting game. Try making Ryu do a hadoken ("down", "right" then "x").
                        </p>
                        <p>
                            The combos will not register if the user takes to long to enter the combo. By default
                            the user is given 800ms between each keypress for the combo to activate, but you can
                            change that number to any ms value by setting keypress.sequence_delay directly.
                        </p>
                        <div class="ryu standing"></div>
                    </div>
                    <div class="demo" data-demo="demo_5">
                        <h2>Other Features</h2>
                        <p>
                            Below in the documentation you can find details of all the options you can specify
                            when creating a Keypress combo, but here's a quick synopsis of some more things you
                            can do:
                        </p>
                        <p>
                            The prevent_default option in Keypress is special because it will preventDefault
                            on all keys that are part of a combo, rather than only preventing when the full
                            combo is pressed.
                        </p>
                        <p>
                            You can use the is_ordered option to force your combos to be pressed in a particular
                            order. By default, all combos can be pressed in an arbitrary order (except for
                            sequence combos which of course are always ordered).
                        </p>
                        <p>
                            The prevent_repeat option makes sure your callback is only called once instead of
                            being called every time the keydown event is fired.
                        </p>
                        <p>
                            You can enter special characters that can only be entered with the shift key
                            (eg. !, @, #, $, etc.) as part of your combo and Keypress will seamlessly handle
                            that for you.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="documentation">
            <h1 class="blue">Great! So how do I use it?</h1>
            <p>
                Of course you'll need to include the js file in your HTML, but that's all you need
                to do to get started. All that's left for you to do is describe all of your key combos.
            </p>
            <p>
                The simplest way to register a combo is to use 'keypress.combo()'. The first parameter
                is a string or array of key names that describe the combo. The second parameter is
                the on_keydown callback, and the third optional parameter is the prevent_default
                option which defaults to false.
            </p>
<pre><code class="javascript">keypress.combo("shift s", function() {
    console.log("You pressed shift and s");
});

// There are also a few other shortcut methods:

// If we want to register a counting combo
keypress.counting_combo("tab space", function(e, count) {
    console.log("You've pressed this " + count + " times.");
});

// If you want to register a sequence combo
keypress.sequence_combo("up up down down left right left right b a enter", function() {
    lives = 30;
}, true);
</code></pre>
            <p>
                If you only want to use Keypress for some very simple keyboard shortcuts,
                that's all you need to know, and you can stop reading.
            <p>
                If you want to use some of the more advanced features of Keypress, you can use
                'keypress.register_combo()' and supply an object with any number of options
                described below. All of the options are listed below with their default settings.
            </p>

<pre><code class="javascript">keypress.register_combo({
    "keys"              : null,
    "on_keydown"        : null,
    "on_keyup"          : null,
    "this"              : window,
    "prevent_default"   : false,
    "prevent_repeat"    : false,
    "is_ordered"        : false,
    "is_counting"       : false,
    "is_sequence"       : false,
    "is_exclusive"      : false
});</code></pre>
            <ul>
                <li>
                    <strong class="group_1">keys:</strong> This option can be either an array of strings,
                    or a single space separated string of key names that describe the
                    keys that make up the combo.
                </li>
                <li>
                    <strong class="group_2">on_keydown:</strong> This is a function that gets called everytime
                    the keydown event for our combo is fired. We pass this two arguments: the
                    keydown event that triggered it, and an integer representing the number of
                    times the combo has been pressed (this will be 0 unless it is a counting
                    combo).
                </li>
                <li>
                    <strong class="group_2">on_keyup:</strong> Same as above but for keyup. This only receives
                    the keyup event and does not receive the second 'count' argument. This will
                    only be called the first time you release one of the component keys of the combo.
                </li>
                <li>
                    <strong class="group_2">this:</strong> By default our callbacks will be called with 'this'
                    set to window, but we can specify the scope with this option.
                </li>
                <li>
                    <strong class="group_3">prevent_default:</strong> While you can either return false in
                    your callback or use event.preventDefault() to prevent the default
                    browser behavior for a combo, this option will prevent the default
                    browser behavior for all keypresses that are part of a combo. What this
                    means is that if you have, for example, a combo "shift s", both 'shift'
                    and 's' will independently preventDefault when pressed.
                </li>
                <li>
                    <strong class="group_3">prevent_repeat:</strong> Normally the on_keydown callback will be
                    called as fast as your browser fires the keydown event, but by setting this
                    option to true, the on_keydown callback will only be called the first time.
                </li>
                <li>
                    <strong class="group_4">is_ordered:</strong> This option allows us to force the order in
                    which the user presses the keys to activate the combo. The combo
                    "shift s" will normally activate even if the user presses 's' first, then
                    presses 'shift' while still holding down 's'. Setting this option to true
                    will force the user to press the keys in the order described in the keys option.
                </li>
                <li>
                    <strong class="group_4">is_counting:</strong> Setting this to true will make the combo a
                    counting combo as described above.
                </li>
                <li>
                    <strong class="group_4">is_sequence:</strong> Setting this to true will make the combo a
                    sequence combo as described above.
                </li>
                <li>
                    <strong class="group_4">is_exclusive:</strong> Normally when pressing a key, any and all combos
                    that match will have their callbacks called. For instance, pressing 'shift' and
                    then 's' would activate the following combos if they existed: "shift", "shift s"
                    and "s". When we set is_exclusive to true, we will not call the callbacks for
                    any combos that are also exclusive and less specific.
                </li>
            </ul>

            <p>
                If you are registering a lot of combos at once, you'll probably want to describe
                combo objects as described above, store them all in an array, and then register
                them all at once using 'keypress.register_many()'. That might look something like
                this:
            </p>
<pre><code class="javascript">my_scope = this;
my_combos = [
    {
        "keys"          : "shift s",
        "is_exclusive"  : true,
        "on_keydown"    : function() {
            console.log("You pressed shift and s together.");
        },
        "on_keyup"      : function(e) {
            console.log("And now you've released one of the keys.");
        },
        "this"          : my_scope
    },
    {
        "keys"          : "s"
        "is_exclusive"  : true,
        "on_keyup"      : function(event) {
            event.preventDefault();
            console.log("We've prevented the s key from doing anything!");
        },
        "this"          : my_scope
    }
];
keypress.register_many(my_combos);</code></pre>

            <p>
                You can then also unregister your combos either specifying the keys (beware that
                this will clear ALL combos that match the keys), or you can unregister by passing
                in the object you passed in to register_combo (another reason to manually create
                the combo objects yourself instead of using the 'keypress.combo()' shortcut method).
                Or you can simply remove all registered combos using 'keypress.reset()'.
            </p>

<pre><code class="javascript">// Remove all "shift s" combos we've registered
keypress.unregister_combo("shift s");

// Or only these specific combos
keypress.unregister_many(my_combos);

// Or remove ALL combos that have been registered
keypress.reset();</code></pre>

            <p>
                If we simply want keypress to stop listening (for instance when focusing on a 
                text input field or textarea). We could use keypress.stop_listening() like so:
            </p>
<pre><code class="javascript">$('input[type=text]')
    .bind("focus", keypress.stop_listening)
    .bind("blur", keypress.listen);</code></pre>

            <br>
            <h1 class="pink">A few notes on usage</h1>
            <p>
                If you want to make a shortcut to override default behavior such as saving, you should
                use the "meta" key instead of specifically using "ctrl" or "cmd". This "meta" key
                will become "ctrl" or "cmd" appropriately depending on the user's system.
            </p>
            <p>
                Non-modifier keys do not ever fire a keyup event when the command key is
                held down, so we manually force a keyup event immediately after keydown is received.
                This means that if your combo includes the meta key, it can contain any number of
                modifier keys, but only one non-modifier key. Modifier keys are: "meta", "alt",
                "option", "ctrl", "shift", and "cmd".
            </p>
            <p>
                Some keys have unreliable support and should mostly be avoided. Print, Scroll Lock,
                Pause/Break, and Insert have unreliable keyup or keydown firing in Windows or OS X, so
                I suggest avoiding them, although Keypress does still allow them.
            </p>
            <p>
                The numpad keys should also be used with caution since you can't always count on the user
                having a numpad, and browser support for the numpad keys is not standardized. The numpad
                keys have to be specified manually with "num_" preceeding the key name. If you used a "."
                in your combo, for instance, it would assume a period and not a decimal (which would be 
                "num_decimal").
            </p>
            <p>
                For a full list of the key names, you should refer to the
                <a href="https://github.com/dmauro/Keypress/blob/master/keypress.coffee#L584-717">source code</a>.
            </p>
            <h1 class="lime">Thanks!</h1>
            <p>
                Any feedback is appreciated, and if you are using this library, I'd love to hear
                about it so I can brag about it and give a shout out here on this page. Contact me
                on twitter as <a href="http://twitter.com/dmaurolizer">@dmaurolizer</a>.
            </p>
        </div>
    </div>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    
    <script src="./js/main.js"></script>
    <script src="./js/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
